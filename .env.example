# =============================================================================
# CDS Connect Production Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Domain Configuration
# -----------------------------------------------------------------------------
DOMAIN=cdsconnect.org
LETSENCRYPT_EMAIL=admin@cdsconnect.org

# -----------------------------------------------------------------------------
# Image Versions (use specific tags in production, not 'latest')
# -----------------------------------------------------------------------------
CQL_SERVICES_VERSION=latest
AUTHORING_TOOL_VERSION=latest

# -----------------------------------------------------------------------------
# CQL Services Configuration
# -----------------------------------------------------------------------------
# Required: Your UMLS API Key for VSAC value set downloads
# Get one at: https://uts.nlm.nih.gov/uts/
UMLS_API_KEY=your-umls-api-key-here

# Maximum request body size (default: 2mb)
CQL_SERVICES_MAX_REQUEST_SIZE=2mb

# Set to 'true' to ignore VSAC download errors (NOT recommended for production)
IGNORE_VSAC_ERRORS=false

# Card logging: 'off', 'console', or 'file:/path/to/folder'
CARD_LOGGING=off

# -----------------------------------------------------------------------------
# Authoring Tool Configuration
# -----------------------------------------------------------------------------
# Required: Secret for session encryption (must be at least 32 characters)
# Generate with: openssl rand -hex 32
AUTH_SESSION_SECRET=your-session-secret-here

# Enable local authentication (default: true)
# When enabled, users are authenticated against config/local-users.json
AUTH_LOCAL_ACTIVE=true

# Enable LDAP authentication (default: false)
# When enabled, requires LDAP configuration below
AUTH_LDAP_ACTIVE=false

# LDAP Configuration (only required if AUTH_LDAP_ACTIVE=true)
# AUTH_LDAP_URL=ldap://ldap.example.org
# AUTH_LDAP_BIND_DN=cn=admin,dc=example,dc=org
# AUTH_LDAP_BIND_CREDENTIALS=ldap-password-here
# AUTH_LDAP_USER_SEARCH_BASE=ou=users,dc=example,dc=org

# Optional: CDS Connect Repository publishing endpoint
REPO_PUBLISH_ENDPOINT=
REPO_PUBLISH_TOKEN=

# -----------------------------------------------------------------------------
# User Management
# -----------------------------------------------------------------------------
# Users are defined in config/local-users.json with bcrypt-hashed passwords.
# See config/local-users.example.json for the format.
#
# To create a bcrypt hash for a password, run:
#   node -e "require('bcryptjs').hash('yourpassword', 10).then(console.log)"
#
# Or use an online bcrypt generator (use cost factor 10-12)

# -----------------------------------------------------------------------------
# CQL Services Sync Configuration
# -----------------------------------------------------------------------------
# Enable sync from Authoring Tool to CQL Services (default: true)
# When enabled, "Download & Sync" button writes ELM JSON and Hook configs
# directly to the CQL Services config directories
CQL_SERVICES_SYNC_ENABLED=true

# -----------------------------------------------------------------------------
# Branding Configuration (optional - runtime config, no rebuild required)
# -----------------------------------------------------------------------------
# Set BRANDING_ENABLED=true to show the institutional header
# If not enabled (default), the entire header section will be hidden
# These are served at runtime via /authoring/api/config

BRANDING_ENABLED=false
BRANDING_IMAGE_URL=
BRANDING_IMAGE_ALT=Organization logo
BRANDING_TEXT=
BRANDING_LINK_URL=
BRANDING_COLOR=#990000

# Example: Custom organization branding
# BRANDING_ENABLED=true
# BRANDING_IMAGE_URL=/assets/images/org-logo.png
# BRANDING_IMAGE_ALT=My Organization Logo
# BRANDING_TEXT=My Organization Name
# BRANDING_LINK_URL=https://example.org
# BRANDING_COLOR=#1e2f40

# -----------------------------------------------------------------------------
# Analytics (Optional)
# -----------------------------------------------------------------------------
# Digital Analytics Program URL
REACT_APP_DAP_URL=

# Google Tag Manager Key
REACT_APP_GTM_KEY=

# -----------------------------------------------------------------------------
# MongoDB Configuration (for production, consider authentication)
# -----------------------------------------------------------------------------
# If using MongoDB authentication, update MONGO_URL in docker-compose.yml
# MONGO_INITDB_ROOT_USERNAME=admin
# MONGO_INITDB_ROOT_PASSWORD=secure-password-here